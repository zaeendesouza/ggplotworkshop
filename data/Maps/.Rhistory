geom_bar(stat = "identity",
fill = "seagreen") +
labs(x = "Year",
y = "Mean FE",
title = "Mean Food Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 500))
plot_4 <- ggplot(table_d,
aes(x = as.factor(year),
y = cal_pcpd)) +
geom_bar(stat = "identity",
fill = "seagreen") +
labs(x = "Year",
y = "Mean PCPC",
title = "Mean Per Capita Daily Calorie Intake by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 2500))
plots <- plot_grid(plot_1, plot_3, plot_2, plot_4)
print(plots)
# Grapping food share by decile by year
plot_5 <- ggplot(table_f,
aes(x = as.factor(tepc_deciles),
y = food_share)) +
geom_bar(stat = "identity", fill = "seagreen") +
labs(x = "Consumption Decile",
y = "Food Share (%)",
title = "Food Share by Year and Consumption Decile") +
facet_wrap( ~ year) + theme_pander(base_size = 8)
print(plot_5)
#------------------------------------------------------------------------------#
# Subject: Development Economics (2021 Shiuli Vanaja)
# Title: Data Assignment 1b Answer Key/Guide
# Author: Zaeen de Souza
#------------------------------------------------------------------------------#
table_f <-
svyby(
~ food_share,
~ year + tepc_deciles,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
nss$food_share <- nss$real_fe/nss$real_te
table_f <-
svyby(
~ food_share,
~ year + tepc_deciles,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
design <- svydesign(ids = ~ 1,
weights = nss$wt,
data = nss)
table_f <-
svyby(
~ food_share,
~ year + tepc_deciles,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
plot_5 <- ggplot(table_f,
aes(x = as.factor(tepc_deciles),
y = food_share)) +
geom_bar(stat = "identity", fill = "seagreen") +
labs(x = "Consumption Decile",
y = "Food Share (%)",
title = "Food Share by Year and Consumption Decile") +
facet_wrap( ~ year) +
theme_pander(base_size = 8)
print(plot_5)
rm(list = ls())
ihds_hh <- read_dta("F:/Teaching UGs/UG R Development Econ (Shiuli)/ihds_hh.dta")
# adding the factor labels from the meta data (reading from the DTA)
ihds_hh <- ihds_hh %>%
mutate_if(
is.labelled,
funs(as_factor(.)))
# making a dummy variable for NONPOOR and POOR (question 1.b)
ihds_hh$nonpoor_dummy <- NA
ihds_hh$nonpoor_dummy[ihds_hh$POOR=="poor 1"] <- 0
ihds_hh$nonpoor_dummy[ihds_hh$POOR=="nonpoor 0"] <- 1
ihds_hh$poor_dummy <- NA
ihds_hh$poor_dummy[ihds_hh$POOR=="poor 1"] <- 1
ihds_hh$poor_dummy[ihds_hh$POOR=="nonpoor 0"] <- 0
## Creating variable for number of children
ihds_hh$total_kids <- ihds_hh$NCHILDF+ihds_hh$NCHILDM
## creating variable for years of female education + years male edu
ihds_hh$years_femedu <- NA
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="none 0"] <- 0
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="1st class 1"] <- 1
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="2nd class 2"] <- 2
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="3rd class 3"] <- 3
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="4th class 4"] <- 4
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="5th class 5"] <- 5
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="6th class 6"] <- 6
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="7th class 7"] <- 7
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="8th class 8"] <- 8
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="9th class 9"] <- 9
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="Secondary 10"] <- 10
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="11th Class 11"] <- 11
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="High Secondary 12"] <- 12
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="1 year post-secondary"] <- 13
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="2 years post-secondary"] <- 14
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="Bachelors 15"] <- 15
ihds_hh$years_femedu[ihds_hh$HHEDUCF=="Above Bachelors 16"] <- 16
ihds_hh$years_maleedu <- NA
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="none 0"] <- 0
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="1st class 1"] <- 1
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="2nd class 2"] <- 2
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="3rd class 3"] <- 3
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="4th class 4"] <- 4
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="5th class 5"] <- 5
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="6th class 6"] <- 6
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="7th class 7"] <- 7
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="8th class 8"] <- 8
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="9th class 9"] <- 9
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="Secondary 10"] <- 10
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="11th Class 11"] <- 11
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="High Secondary 12"] <- 12
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="1 year post-secondary"] <- 13
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="2 years post-secondary"] <- 14
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="Bachelors 15"] <- 15
ihds_hh$years_maleedu[ihds_hh$HHEDUCM=="Above Bachelors 16"] <- 16
# setting survey design
ihds_design <- svydesign(ids = ~1,
weights = ihds_hh$WT,
data = ihds_hh)
# Q1. (a) Find out the proportion of the households that were poor in 2012 in the IHDS data set.
# (b)	 Create a dummy variable ‘NONPOOR’ which takes value 1 when a household is not poor.
# (c)	What is the average consumption expenditure, average level of education of the head of the household and average number of children in the households who are poor and households who are not poor?
table_a <- svyby(~COPC+years_femedu+total_kids, ~POOR,
ihds_design,
svymean,
na.rm=T,
vartype="se")
# re-arranging the table
table_a <- t(table_a)
table_a <- as.data.frame(table_a)
## removing the SE from the table
table_a <- table_a[-c(5,6,7), ]
table_a
# (d)	Conduct a test for difference in mean of certain main variables (per capita consumption expenditure, education of the head of the household, education of the female head of the household, access to piped water at home, presence of toilet at home, number of assets, owning land),   between poor and non-poor households and present these results in a Table. Analyze the results.
# t-test for COPC by poor/nonpoor
svyttest(COPC ~ poor_dummy,
na.rm=T,
ihds_design)
# t-test for years of female education
svyttest(years_femedu ~ poor_dummy,
na.rm=T,
ihds_design)
# t-test for no. of children
results <- svyttest(total_kids ~ poor_dummy,
na.rm=T,
ihds_design)
# 2.	(a) What is the percentage of households belonging to different caste and religious groups in this data set?  What is the percentage of households residing in urban and rural areas?
# caste by rural/urban
table_b <- prop.table(svymean(~ ID13+URBAN2011, ihds_design, na.rm=T),1)
table_b <- svyby(~ ID13,
~URBAN2011,
ihds_design,
svymean,
na.rm=T)
table_b <- table_b[1:7]
table_b <-t(table_b)
table_b <- as.data.frame(table_b)
table_b <- table_b[-c(1), ]
table_b
# Calculate the average monthly consumption expenditure of households belonging to different caste and religious groups? By plotting a graph, show how the average monthly consumption expenditure for poor and non-poor households varies by caste and by rural and urban areas in the data set. What can you infer from this graph?
table_c <-
svyby(
~ COPC,
~ ID13+URBAN2011,
ihds_design,
svymean,
na.rm = T,
vartype = c("se")
)
# making the plot
plot_6 <- ggplot(table_c,
aes(x = as.factor(ID13),
y = COPC)) +
geom_bar(stat = "identity",
fill = "seagreen") +
labs(x = "Caste",
y = "Mean Consumption Per Capita",
title = "Mean COPC By Caste & Location") +
facet_wrap( ~ URBAN2011) +
theme_pander(base_size = 8) +
coord_flip()
print(plot_6)
# 3.	(a) What is the correlation between education levels and poverty? Find and report correlation between different indicators of education and being poor in this data set.
# (b)	Conduct an ordinary least square regression between poverty and education levels (head of the household and female head of the household)? What will be the control variables which you can use in these regressions? Report these results in a Table and analyze it.
# correlation between assets, COPC and years of female edu (highest)
svycor(~ASSETS + COPC + years_femedu,
na.rm = T,
design = ihds_design)
# regression
model_a <- lm_robust(years_femedu ~
ASSETS +
log(COPC+1) +
ID13 +
URBAN2011 +
years_maleedu +
STATEID,
data = ihds_hh,
weights = ihds_hh$WT)
summary(model_a)
View(table_a)
View(table_b)
View(table_c)
plot_6 <- ggplot(table_c,
aes(x = as.factor(ID13),
y = COPC)) +
geom_bar(stat = "identity",
fill = "seagreen") +
labs(x = "Caste",
y = "Mean Consumption Per Capita",
title = "Mean COPC By Caste & Location") +
facet_wrap(~ URBAN2011) +
theme_pander(base_size = 8) +
coord_flip()
print(plot_6)
plot_6 <- ggplot(table_c,
aes(x = as.factor(ID13),
y = COPC)) +
geom_bar(stat = "identity",
fill = "dakrslateblie") +
labs(x = "Caste",
y = "Mean Consumption Per Capita",
title = "Mean COPC By Caste & Location") +
facet_wrap(~ URBAN2011) +
theme_pander(base_size = 8) +
coord_flip()
print(plot_6)
plot_6 <- ggplot(table_c,
aes(x = as.factor(ID13),
y = COPC)) +
geom_bar(stat = "identity",
fill = "darkslateblue") +
labs(x = "Caste",
y = "Mean Consumption Per Capita",
title = "Mean COPC By Caste & Location") +
facet_wrap(~ URBAN2011) +
theme_pander(base_size = 8) +
coord_flip()
print(plot_6)
plot_1 <- ggplot(table_a,
aes(x = as.factor(year),
y = real_mpce)) +
geom_bar(stat = "identity",
fill = "indianred3") +
labs(x = "Year",
y = "Mean MPCE",
title = "Mean Per Capita Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 500))
# Plotting table_b
plot_2 <- ggplot(table_b,
aes(x = as.factor(year),
y = real_te)) +
geom_bar(stat = "identity",
fill = "orchid3") +
labs(x = "Year",
y = "Mean TE",
title = "Mean Total Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 2500))
plot_3 <- ggplot(table_c,
aes(x = as.factor(year),
y = real_fe)) +
geom_bar(stat = "identity",
fill = "seagreen3") +
labs(x = "Year",
y = "Mean FE",
title = "Mean Food Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 500))
plot_4 <- ggplot(table_d,
aes(x = as.factor(year),
y = cal_pcpd)) +
geom_bar(stat = "identity",
fill = "darkslateblue") +
labs(x = "Year",
y = "Mean PCPC",
title = "Mean Per Capita Daily Calorie Intake by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 2500))
plots <- plot_grid(plot_1, plot_3, plot_2, plot_4)
print(plots)
#------------------------------------------------------------------------------#
# Subject: Development Economics (2021 Shiuli Vanaja)
# Title: Data Assignment 1a Answer Key/Guide
# Author: Zaeen de Souza
#------------------------------------------------------------------------------#
# empty the current environment so we can start fresh
rm(list = ls())
# Load packages: un-comment and install pacman, if not already installed
# install.packages("pacman")
# p_load will run through the list of packages, loading if available,
# and installing + loading if not installed already
library(pacman)
p_load(haven,
survey,
dplyr,
cowplot,
ggplot2,
ggthemes,
labelled,
jtools,
estimatr)
# Load the NSS dataset; user needs to update this link
nss <-
read_dta("F:/Teaching UGs/UG R Development Econ (Shiuli)/NSS_Consumption_Data_1987_2011.dta")
# Replacing the object called nss, with a subset of nss, that contains
# only observations with non-missing weights
nss <- subset(nss, !is.na(nss$wt))
# Inflation adjustments for all consumption data
# making a new variable called real_te for total exp
nss$real_te <- NA
nss$real_te <-
ifelse(nss$urban == 1,
nss$te / nss$u_indexchained,
nss$te / nss$r_indexchained)
# making a new variable called real_fe for food exp
nss$real_fe <- NA
nss$real_fe <-
ifelse(nss$urban == 1,
nss$fe / nss$u_indexchained,
nss$fe / nss$r_indexchained)
# making one for monthly per capita income
nss$real_mpce <- NA
nss$real_mpce <-
ifelse(nss$urban == 1,
nss$mpce / nss$u_indexchained,
nss$mpce / nss$r_indexchained)
# making food share
nss$food_share <- nss$real_fe / nss$real_te
# Adding labels to factor variables
nss$year <-
factor(
nss$year,
levels = c(1983, 1987, 1993, 2004, 2009, 2011),
labels = c("1983", "1987", "1993", "2004", "2009", "2011")
)
nss$caste <-
factor(nss$caste,
levels = c(0, 1, 2),
labels = c("Others", "ST", "SC"))
nss$religion <-
factor(
nss$religion,
levels = c(1, 2, 3),
labels = c("Hindu", "Muslim", "Other")
)
nss$tepc_deciles <-
factor(
nss$tepc_deciles,
levels = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),
labels = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10")
)
# Using the design function from the survey package to set ther survey design
design <- svydesign(ids = ~ 1,
weights = nss$wt,
data = nss)
# Q.1. Provide summary statistics of all the main variables in the data set.
# What is the average monthly consumption expenditure for households in this
# data set? Calculate the average monthly consumption expenditure for different
# years and plot it on a graph.
# MPCE by year
table_a <-
svyby(
~ real_mpce,
~ year,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# total exp by year
table_b <-
svyby(
~ real_te,
~ year,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# Food exp by year
table_c <-
svyby(
~ real_fe,
~ year,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# per capita calorie intake per day by year
table_d <-
svyby(
~ cal_pcpd,
~ year,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# HH food share of budget by year
table_e <-
svyby(
~ food_share,
~ year,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# HH food share of budget by expenditure decile and year
table_f <-
svyby(
~ food_share,
~ year + tepc_deciles,
design = design,
FUN = svymean,
deff = F,
na.rm = T,
vartype = c("se")
)
# Plotting table_a: mpce by year
plot_1 <- ggplot(table_a,
aes(x = as.factor(year),
y = real_mpce)) +
geom_bar(stat = "identity",
fill = "indianred3") +
labs(x = "Year",
y = "Mean MPCE",
title = "Mean Per Capita Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 500))
# Plotting table_b
plot_2 <- ggplot(table_b,
aes(x = as.factor(year),
y = real_te)) +
geom_bar(stat = "identity",
fill = "orchid3") +
labs(x = "Year",
y = "Mean TE",
title = "Mean Total Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 2500))
plot_3 <- ggplot(table_c,
aes(x = as.factor(year),
y = real_fe)) +
geom_bar(stat = "identity",
fill = "seagreen3") +
labs(x = "Year",
y = "Mean FE",
title = "Mean Food Consumption Expenditure by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 500))
plot_4 <- ggplot(table_d,
aes(x = as.factor(year),
y = cal_pcpd)) +
geom_bar(stat = "identity",
fill = "darkslateblue") +
labs(x = "Year",
y = "Mean PCPC",
title = "Mean Per Capita Daily Calorie Intake by Year") +
theme_pander(base_size = 8) +
scale_y_continuous(limits = c(0, 2500))
plots <- plot_grid(plot_1, plot_3, plot_2, plot_4)
print(plots)
# Grapping food share by decile by year
plot_5 <- ggplot(table_f,
aes(x = as.factor(tepc_deciles),
y = food_share)) +
geom_bar(stat = "identity", fill = "seagreen") +
labs(x = "Consumption Decile",
y = "Food Share (%)",
title = "Food Share by Year and Consumption Decile") +
facet_wrap(~ year) +
theme_pander(base_size = 8)
print(plot_5)
plots <- plot_grid(plot_1, plot_3, plot_2, plot_4)
print(plots)
print(plots)
model_a <- lm_robust(
years_femedu ~
ASSETS +
log(COPC + 1) +
ID13 +
URBAN2011 +
years_maleedu +
STATEID,
data = ihds_hh,
weights = ihds_hh$WT
)
summary(model_a)
